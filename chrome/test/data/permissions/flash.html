<!DOCTYPE html>
<html>
<script>
  function triggerPrompt() {
    document.getElementById('flash-link').click();
    window.domAutomationController.send(true);
  }

  function triggerPromptViaNewWindow() {
    document.getElementById('flash-new-window-link').click();
    window.domAutomationController.send(true);
  }

  function flashIsEnabled() {
    var plugin = document.getElementById('flash-object');
    plugin.addEventListener('message', function handleEvent(event) {
      if (event.data.source === 'getPowerSaverStatusResponse') {
        plugin.removeEventListener('message', handleEvent);
        window.domAutomationController.send(true);
      }
    });
    if (plugin.postMessage) {
      plugin.postMessage('getPowerSaverStatus');
    } else {
      window.domAutomationController.send(false);
    }
  }
</script>
<body>
  <object id="flash-object" name="plugin" data="test.swf"
      type="application/x-shockwave-flash" width="400" height="100">
    Flash not supported.
    <br>
    <a href="https://get.adobe.com/flashplayer/" id="flash-link">
      Download Flash.
    </a>
    <a id="flash-new-window-link"
        onclick="window.open('https://get.adobe.com/flashplayer/');">
      Download Flash window.open
    </a>
  </object>
</body>
</html>
