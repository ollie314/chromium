<!DOCTYPE html>
<head>
<script>
if (window.testRunner)
    testRunner.waitUntilDone();
function done() {
    if (window.testRunner)
        testRunner.notifyDone();
}
</script>
<style>
test1 {
    content: url("/security/resources/green-if-referrer-is-expected.php?referrer=http://127.0.0.1:8000/security/modified_location&before");
}
</style>
<script>
history.pushState({}, "modified title", "modified_location");
</script>
<style>
test2 {
    content: url("/security/resources/green-if-referrer-is-expected.php?referrer=http://127.0.0.1:8000/security/modified_location&after");
}
</style>
</head>
<body onload="done();">
<p>
Checks that the referrer of CSS image is affected by history.replaceState.
This test passes if two green rectangles are shown.
</p>
<test1></test1>
<test2></test2>
</body>
